<section class="py-16 md:py-24 bg-slate-50 scroll-mt-28" id="contacto">
  <div class="mx-auto max-w-7xl px-6 md:px-8 grid md:grid-cols-2 gap-8">
    <div class="rounded-2xl bg-white p-6 md:p-7 shadow-sm border" data-reveal>
      <h3 class="font-semibold text-xl">Solicita una Demo</h3>

      <!-- üîΩ Reemplaza XXXXXXX por tu ID real de Formspree -->
      <form id="contactForm" action="https://formspree.io/f/XXXXXXX" method="POST" class="mt-4 grid gap-4">
        <input name="nombre" placeholder="Tu nombre" class="border rounded-xl px-4 py-3" required />
        <input name="email" type="email" placeholder="Email" class="border rounded-xl px-4 py-3" required />
        <input name="telefono" placeholder="+51 ..." class="border rounded-xl px-4 py-3" />
        <select name="estanques" class="border rounded-xl px-4 py-3">
          <option>1-5 estanques</option><option>6-10 estanques</option>
          <option>11-20 estanques</option><option>20+ estanques</option>
        </select>
        <textarea name="mensaje" placeholder="Cu√©ntanos sobre tu operaci√≥n acu√≠cola..." class="border rounded-xl px-4 py-3" rows="4"></textarea>

        <!-- opcional: asunto para el email -->
        <input type="hidden" name="_subject" value="Nueva solicitud de demo ‚Äì TilapiaSoft" />

        <button type="submit"
          class="rounded-xl bg-blue-600 text-white px-5 py-3 transition-all duration-300 hover:bg-blue-700 hover:-translate-y-0.5">
          Enviar
        </button>
      </form>
    </div>

    <div class="rounded-2xl bg-white p-6 md:p-7 shadow-sm border" data-reveal style="--d:120ms">
      <h3 class="font-semibold text-xl">Informaci√≥n de Contacto</h3>
      <ul class="mt-4 text-slate-700 space-y-2">
        <li><strong>Tel√©fono:</strong> +1 (555) 123-4567</li>
        <li><strong>Email:</strong> contacto@tilapiasoft.com</li>
        <li><strong>Oficina:</strong> 123 Calle Acuicultura, Ciudad</li>
      </ul>
      <div class="mt-6 rounded-xl bg-blue-50 p-4 text-sm">
        <p class="font-semibold">¬øPor qu√© elegir TilapiaSoft?</p>
        <ul class="list-disc pl-5 mt-2 space-y-1">
          <li>Especialistas con 10+ a√±os de experiencia</li>
          <li>Soporte t√©cnico y capacitaci√≥n continua</li>
          <li>ROI promedio 40% en el primer a√±o</li>
        </ul>
      </div>
    </div>
  </div>
</section>

<!-- üìå Intercepta el submit, muestra alerta y redirige a la home -->
<script is:inline>
(() => {
  const form = document.getElementById('contactForm');
  if (!form) return;

  const HOME = `${import.meta.env.BASE_URL}`; // respeta /tilapiasoft-landing/ en GitHub Pages

  form.addEventListener('submit', async (e) => {
    e.preventDefault();

    const btn = form.querySelector('button[type="submit"]');
    btn?.setAttribute('disabled', 'true');
    btn?.classList.add('opacity-60', 'cursor-not-allowed');

    try {
      const resp = await fetch(form.action, {
        method: 'POST',
        body: new FormData(form),
        headers: { 'Accept': 'application/json' }
      });

      if (resp.ok) {
        alert('¬°Gracias! Tu mensaje fue enviado con √©xito.');
        form.reset();
        window.location.href = HOME; // redirige a la portada
      } else {
        const data = await resp.json().catch(() => null);
        alert(data?.errors?.[0]?.message || 'No se pudo enviar. Int√©ntalo nuevamente.');
        btn?.removeAttribute('disabled');
        btn?.classList.remove('opacity-60', 'cursor-not-allowed');
      }
    } catch {
      alert('Hubo un problema de conexi√≥n. Por favor, intenta nuevamente.');
      btn?.removeAttribute('disabled');
      btn?.classList.remove('opacity-60', 'cursor-not-allowed');
    }
  });
})();
</script>
