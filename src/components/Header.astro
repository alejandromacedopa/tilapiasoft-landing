---
// Header.astro
---
<header class="sticky top-0 z-40 bg-white/70 backdrop-blur border-b border-slate-100">
  <nav class="mx-auto max-w-7xl px-4 sm:px-6 md:px-8 h-16 flex items-center justify-between">
    <!-- Logo -->
    <a href={`${import.meta.env.BASE_URL}`} class="flex items-center gap-2 font-semibold tracking-tight">
      <img src={`https://i.ibb.co/x86RBWNP/Black-and-White-Illustrated-Fishing-Club-Logo.png`} alt="TilapiaSoft" class="h-7 w-7 rounded" loading="eager" />
      <span class="text-base">TilapiaSoft</span>
    </a>

    <!-- Menú de escritorio -->
    <ul class="hidden md:flex items-center gap-8 text-sm">
      <li><a href="#servicios" class="hover:text-blue-600 transition-colors">Servicios</a></li>
      <li><a href="#precios" class="hover:text-blue-600 transition-colors">Precios</a></li>
      <li><a href="#contacto" class="hover:text-blue-600 transition-colors">Contacto</a></li>
    </ul>

    <!-- CTA escritorio -->
    <a href="#contacto"
       class="hidden md:inline-flex rounded-xl bg-blue-600 text-white px-4 py-2.5 text-sm font-medium transition-all duration-300 hover:bg-blue-700 hover:-translate-y-0.5">
      Contactar
    </a>

    <!-- Botón hamburguesa (solo móvil) -->
    <button
      class="md:hidden inline-flex items-center justify-center h-10 w-10 rounded-xl border border-slate-200"
      aria-controls="mobile-menu"
      aria-expanded="false"
      data-menu-toggle
    >
      <span class="sr-only">Abrir menú</span>
      <!-- ícono -->
      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
      </svg>
    </button>
  </nav>

  <!-- Panel móvil -->
  <div id="mobile-menu"
       class="md:hidden hidden fixed inset-x-0 top-16 z-40 border-b border-slate-200 bg-white/95 backdrop-blur">
    <div class="px-4 sm:px-6 py-3 space-y-1 text-base">
      <a href="#servicios" class="block px-3 py-2 rounded-lg hover:bg-slate-50">Servicios</a>
      <a href="#precios"   class="block px-3 py-2 rounded-lg hover:bg-slate-50">Precios</a>
      <a href="#contacto"  class="block px-3 py-2 rounded-lg hover:bg-slate-50">Contacto</a>
      <a href="#contacto"
         class="mt-2 inline-flex w-full items-center justify-center rounded-xl bg-blue-600 text-white px-4 py-2.5 font-medium hover:bg-blue-700">
        Contactar
      </a>
    </div>
  </div>
</header>

<!-- Toggle del menú (ligero y compatible) -->
<script is:inline>
  (function () {
    const btn = document.querySelector('[data-menu-toggle]');
    const panel = document.getElementById('mobile-menu');
    if (!btn || !panel) return;

    function close() {
      btn.setAttribute('aria-expanded', 'false');
      panel.classList.add('hidden');
      document.body.classList.remove('overflow-hidden');
    }
    function toggle() {
      const open = btn.getAttribute('aria-expanded') === 'true';
      btn.setAttribute('aria-expanded', String(!open));
      panel.classList.toggle('hidden', open);
      document.body.classList.toggle('overflow-hidden', !open);
    }

    btn.addEventListener('click', toggle);
    // Cerrar al navegar
    panel.querySelectorAll('a').forEach(a => a.addEventListener('click', close));
    // Cerrar al cambiar tamaño a desktop
    window.addEventListener('resize', () => { if (window.innerWidth >= 768) close(); });
  })();
</script>
